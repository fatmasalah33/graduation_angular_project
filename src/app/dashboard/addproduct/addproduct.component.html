<div class="section ps-5 pe-5">
  <div class="mt-0 mb-0 ms-auto me-auto custom-width">
      <div class="card card-format d-flex flex-row row">
          <div class="card-body col-6 m-auto">
              <h2 class="title">Add Product</h2>
              <form method="post" action="" [formGroup]="form" enctype="multipart/form-data" (ngSubmit)="insertdate()">
                  <div class="input-group d-flex flex-column">
                      <input class="form-control w-100 mb-1" type="text" placeholder="Product Name" formControlName="name"  >

                          <span></span>
                          <div
                          id="nameHelp"
                          *ngIf="
                          (form.controls['name'].touched &&
                          form.controls['name'].invalid)|| 
                          (form.controls['name'].untouched && isSubmitted)
                      "
                          class="form-text text-danger"
                        >
                          <small *ngIf="form.controls['name'].errors?.['required']"
                            >This field is required</small
                          >
                       
                    
                        </div>
                  </div>
                  <div class="input-group d-flex flex-column">
                      <input class="form-control mb-1 mt-3 w-100" type="text" placeholder="Price" formControlName="price"  >

                 <span></span>
                 <div
                 id="nameHelp"
                 *ngIf="
                 (form.controls['price'].touched &&
                 form.controls['price'].invalid)
                 || (form.controls['price'].untouched && isSubmitted)
             "
                 class="form-text text-danger"
               >
                 <small *ngIf="form.controls['price'].errors?.['required']"
                   >This field is required</small
                 >
                 <small *ngIf="form.controls['price'].errors?.['pattern']"
                 >Please enter a valid price</small
               >
           
               </div>
                  </div>
                  <div class="input-group d-flex flex-column">
                      <input class="form-control mb-1 mt-3 w-100" type="text" placeholder="description"  formControlName="description">

                 <span></span>
          
                  </div>
                  <div class="input-group d-flex flex-column">
                      <input class="form-control mb-1 mt-3 w-100" type="text" placeholder="brand" formControlName="brand">

                 <span></span>
          
                  </div>
                  <div class="input-group d-flex flex-column">
                      <input class="form-control mb-1 mt-3 w-100" type="text" placeholder="quantity"  formControlName="quantity">

                      <div
                    id="nameHelp"
                    *ngIf="
                    (form.controls['quantity'].touched &&
                    form.controls['quantity'].invalid)
                    || (form.controls['quantity'].untouched && isSubmitted)
                "
                    class="form-text text-danger"
                  >
                    <small *ngIf="form.controls['quantity'].errors?.['required']"
                      >This field is required</small
                    >
                 
                    <small *ngIf="form.controls['quantity'].errors?.['pattern']"
                    > The quantity must be a number</small
                  >
                  </div>
                  </div>
           
                  <div class="input-group d-flex flex-column">
                 
                <select class='form-select mb-1 mt-3 w-100' formControlName='category_id'>
                          <option   >Select a category</option>
                    <option *ngFor="let  category of  categories ; let i = index"  value="{{category.id}}" >{{category.name}}</option>

                    </select>
                    
                    <div
                    id="nameHelp"
                    *ngIf="
                    (form.controls['category_id'].touched &&
                    form.controls['category_id'].invalid)
                    || (form.controls['category_id'].untouched && isSubmitted)
                "
                    class="form-text text-danger"
                  >
                    <small *ngIf="form.controls['category_id'].errors?.['required']"
                      >This field is required</small
                    >
                 
              
                  </div>
                  </div>
                  <div class="input-group d-flex flex-column">
                      <input class="form-control mb-1 mt-3 w-100" type="file" placeholder="Image"  name="image" (change)="uploadImage($event)">

                         <span class="mb-3"></span>
                         <div
                         id="nameHelp"
                         *ngIf="
                         (form.controls['image'].touched &&
                         form.controls['image'].invalid)
                         || (form.controls['image'].untouched && isSubmitted)
                     "
                         class="form-text text-danger"
                       >
                         <small *ngIf="form.controls['image'].errors?.['required']"
                           >This field is required</small
                         >
                      
                   
                       </div>
                       <div
                       id="imgHelp"
                       *ngIf="errorimg!=''"
                       class="form-text text-danger"
                     >
                       <small 
                         >{{errorimg}}</small
                       >
                     
                      
                     </div>
                  </div>
                  <div class="mt-2 d-inline-block me-3">
       <input class="btn btn-info ps-4 pe-4 pt-1 pb-1 " type="submit" name="addproduct" value="Add Product">
                  </div>


              </form>
          </div>
      </div>
  </div>
</div>
